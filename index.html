<!DOCTYPE html>
<html>

<head>
    <title>AR.js Camera with Video</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
</head>
<body>
    <a-scene embedded arjs='sourceType: webcam; detectionMode: mono_and_matrix; matrixCodeType: 3x3; sourceWidth:1920; sourceHeight:1080; displayWidth: 1920; displayHeight: 1080;'>
        <a-assets>
            <video id="vid" loop="true" crossorigin webkit-playsinline playsinline controls>
                <source type="video/mp4" src="test.mp4">
            </video>
        </a-assets>
        <a-marker id="marker" type='barcode' value='5'>
            <a-video id="a-video" src="#vid" width="6" height="6.365" rotation="270 0 0" autoplay="false"></a-video>
        </a-marker>
        <a-entity camera></a-entity>
    </a-scene>
    <div class="footer">
        <div class="row">
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 pull-left">
                <div class="onebleft">
                    <button onclick="pl()" class="btn btnskips">Play Video</Video></button>
                </div>
                <div class="onebleft">
                    <button onclick="pa()" class="btn btnskips">Pause Video</button>
                </div>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 pull-right">
                <div class="onebright">
                    <button onclick="window.location.reload()" class="btn btnskips">Refresh</button>
                </div>
            </div>
        </div>
    </div>


    <script>
        let play = false;
        const marker = document.getElementById('marker');
        const videoElement = document.getElementById('vid');
        // Listen for AR.js markerFound event
        marker.addEventListener('markerFound', function () {
            videoElement.setAttribute('visible', 'true'); // Show the video
            if (play) {
                videoElement.play(); // Start playing the video}
                console.log("Play")
            }
        }
        );
        function pl() {
            play = true;
            vid.play()
        }
        function pa() {
            play = false;
            vid.pause()
        }

        // Listen for AR.js markerLost event
        marker.addEventListener('markerLost', function () {

            videoElement.pause(); // Pause the video when the marker is lost
            videoElement.setAttribute('visible', 'false'); // Hide the video
        });
    </script>

</body>

</html>

<style>
    .footer {
        position: fixed;
        left: 0;
        bottom: 0;
        width: 100%;
        color: white;
    }

    .onebleft {
        padding: 5px 5px 5px 5px;
        margin: 5px 15px 5px 5px;
        float: left;
        z-index: 900000000000;
    }

    .onebright {
        padding: 5px 5px 5px 5px;
        margin: 5px 15px 5px 5px;
        float: right;
        z-index: 900000000000;
    }

    .imgon {
        width: 55px;
        height: 55px;
        background-color: white;
        padding: 3px 2px 2px 2px !important;
    }

    .imgss {
        width: 50px !important;
        height: 50px !important;
    }

    .imgname {
        font-size: 10px;
    }

    .header {
        position: fixed;
        left: 0;
        top: 0;
        width: 100%;
        color: white;
    }

    .oneleft {
        padding: 5px 5px 5px 5px;
        margin: 5px 15px 5px 5px;
        float: left;
        z-index: 900000000000;
    }

    body {
        margin: 0px;
        overflow: hidden;
    }

    .resets {
        background-color: rgba(51, 51, 51, 0.529);
        color: #fff;
        text-align: center;
        border-radius: 2px;
        height: 50px;
        padding: 10px 10px 10px 10px;
        position: fixed;
        top: 10px;
        text-align: center;
        z-index: 9000000000;
        bottom: 10px;
    }

    .btnskips {
        background: rgba(0, 0, 0, 0.433);
        color: white !important;
    }

    .btnskips:hover {
        background: rgb(197, 197, 197);
    }

    #arjsDebugUIContainer {
        display: none;
    }

    .a-enter-vr-button {
        display: none !important;
    }
</style>